<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet id="1" author="Arkadii_Dolgonos">
        <createTable tableName="Manufacturer">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(55)"/>
            <column name="country" type="VARCHAR(55)"/>
            <column name="website" type="VARCHAR(55)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="Product_Group">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="level" type="int"/>
            <column name="name" type="VARCHAR(55)"/>
            <column name="parent_group_id" type="int">
                <constraints nullable="true" foreignKeyName="product_group_parent_group_fk"
                             referencedTableName="Product_Group" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Contact">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="type" type="VARCHAR(55)"/>
            <column name="value" type="VARCHAR(55)"/>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="Person">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(55)"/>
            <column name="surname" type="VARCHAR(55)"/>
            <column name="father_name" type="VARCHAR(55)"/>
            <column name="birth_date" type="date"/>
        </createTable>

        <createTable tableName="Person_Contact_Lnk">
            <column name="person_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="person_contact_lnk_personid_fk"
                             referencedTableName="Person" referencedColumnNames="id"/>
            </column>
            <column name="contact_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="person_contact_lnk_contactid_fk"
                             referencedTableName="Contact" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Provider">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="rating" type="int"/>
            <column name="name" type="VARCHAR(55)">
                <constraints unique="true" nullable="false"/>
            </column>
        </createTable>

        <createTable tableName="Provider_Contact_Lnk">
            <column name="provider_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="provider_contact_lnk_providerid_fk"
                             referencedTableName="Provider" referencedColumnNames="id"/>
            </column>
            <column name="contact_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="provider_contact_lnk_contactid_fk"
                             referencedTableName="Contact" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Product">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="strength" type="int"/>
            <column name="name" type="VARCHAR(55)"/>
            <column name="manufacturer_id" type="int">
                <constraints nullable="false" foreignKeyName="product_manufacturerid_fk"
                             referencedTableName="Manufacturer" referencedColumnNames="id"/>
            </column>
            <column name="product_group_id" type="int">
                <constraints nullable="false" foreignKeyName="product_productgroupid_fk"
                             referencedTableName="Product_Group" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Product_Lnk">
            <column name="child_product_id" type="int">
                <constraints nullable="false" foreignKeyName="product_lnk_childproductid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
            <column name="parent_product_id" type="int">
                <constraints nullable="false" foreignKeyName="product_lnk_parentproductid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Ext_Product_Model">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(55)"/>
            <column name="description" type="VARCHAR(2000)"/>
            <column name="production_start" type="date"/>
            <column name="production_end" type="date"/>
        </createTable>

        <createTable tableName="Ext_Product_Brand">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(55)"/>
            <column name="description" type="VARCHAR(2000)"/>
        </createTable>

        <createTable tableName="Ext_Product">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="ext_product_brand_id" type="int">
                <constraints nullable="false" foreignKeyName="ext_product_extproductbrand_fk"
                             referencedTableName="Ext_Product_Brand" referencedColumnNames="id"/>
            </column>
            <column name="ext_product_model_id" type="int">
                <constraints nullable="false" foreignKeyName="ext_product_extproductmodel_fk"
                             referencedTableName="Ext_Product_Model" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Product_Extproduct_Lnk">
            <column name="product_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_extproduct_lnk_productid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
            <column name="ext_product_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_extproduct_lnk_extproductid_fk"
                             referencedTableName="Ext_Product" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Provider_Person_Lnk">
            <column name="provider_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="provider_person_lnk_providerid_fk"
                             referencedTableName="Provider" referencedColumnNames="id"/>
            </column>
            <column name="person_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="provider_person_lnk_personid_fk"
                             referencedTableName="Person" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Product_Provider_Lnk">
            <column name="product_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_provider_lnk_productid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
            <column name="provider_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_provider_lnk_providerid_fk"
                             referencedTableName="Provider" referencedColumnNames="id"/>
            </column>
        </createTable>

        <createTable tableName="Product_Price">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="product_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_price_productid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
            <column name="price" type="MONEY"/>
            <column name="date_start" type="date">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="date_end" type="date"/>
        </createTable>

        <createTable tableName="Product_Cost">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="product_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="product_cost_productid_fk"
                             referencedTableName="Product" referencedColumnNames="id"/>
            </column>
            <column name="price" type="MONEY"/>
            <column name="date_start" type="date">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="date_end" type="date"/>
        </createTable>

        <createTable tableName="Position">
            <column name="id" type="int">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(55)">
                <constraints unique="true"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
        </createTable>

        <createTable tableName="Person_Position_Lnk">
            <column name="person_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="person_position_lnk_personid_fk"
                             referencedTableName="Person" referencedColumnNames="id"/>
            </column>
            <column name="position_id" type="int">
                <constraints nullable="false" primaryKey="true" foreignKeyName="person_position_lnk_positionid_fk"
                             referencedTableName="Position" referencedColumnNames="id"/>
            </column>
        </createTable>


    </changeSet>
</databaseChangeLog>